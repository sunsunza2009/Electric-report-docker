{% extends 'base.html' %}
{% block title %}Energy Saving - Sensor Condition{% endblock %}
{% block content %}
          <!-- Page Heading -->
          <h1 class="h3 mb-2 text-gray-800">Condition Managemnet</h1>
          <!-- DataTales Example -->
          <div class="card shadow mb-4">
            <div class="card-body">
              <button type="button" class="btn btn-success mb-3" id="new">Add</button>
              <div class="table-responsive">
                <table class="table table-bordered" id="dataTable" width="100%" cellspacing="0">
                  <thead>
                    <tr>
                      <th>#</th>
                      <th>Room</th>
            <th>Type</th>
            <th>Time</th>
            <th>Action</th>
                    </tr>
                  </thead>
                  
                  <tbody id="conLst">
          <tr>
            <th scope="row">1</th>
            <td>IF-11M210</td>
            <td>
              Air Conditioner ON</br>
              Light OFF</br>
              Electricity ON
            </td>
            <td>
              08.00 - 17.00
            </td>
            <td>                
              <button type="button" class="btn btn-warning" id="edit">Edit</button>
              <button type="button" class="btn btn-danger" id="del">Delete</button>
            </td>
          </tr>
        </tbody>
                </table>
              </div>
            </div>
          </div>
{% endblock %}
{% block js %}
<script>
  $("#new, #edit").click(async function(){
    Swal.fire({
      width: '45rem',
      showCancelButton: true,
      confirmButtonColor: '#3085d6',
      cancelButtonColor: '#d33',
      confirmButtonText: 'Submit',
      title: 'Please specify conditions.',
      html: '<table class="table">\
        <thead>\
          <tr>\
            <th scope="col">Type</th>\
            <th scope="col">Action</th>\
          </tr>\
        </thead>\
        <tbody id="conLst">\
          <tr>\
            <td>\
              <div class="form-check">\
                <input class="form-check-input" type="checkbox" value="" id="aircon">\
                <label class="form-check-label" for="aircon">Air Conditioner</label>\
              </div>\
            </td>\
            <td>\
              <select class="form-control" id="airstate">\
                <option value="1">ON</option>\
                <option value="0">OFF</option>\
              </select>\
            </td>\
            </tr>\
          <tr>\
            <td>\
              <div class="form-check">\
                <input class="form-check-input" type="checkbox" value="" id="light">\
                <label class="form-check-label" for="light">Light</label>\
              </div>\
            </td>\
            <td>\
              <select class="form-control"  id="lightstate">\
                <option value="1">ON</option>\
                <option value="0">OFF</option>\
              </select>\
            </td>\
          </tr>\
          <tr>\
            <td>\
              <div class="form-check">\
                <input class="form-check-input" type="checkbox" value="" id="elect">\
                <label class="form-check-label" for="elect">Electricity</label>\
              </div>\
            </td>\
            <td>\
              <select class="form-control" id="electstate">\
                <option value="1">ON</option>\
                <option value="0">OFF</option>\
              </select>\
            </td>\
          </tr>\
          <tr>\
            <td>\
              <div class="form-check">\
                <input class="form-check-input" type="checkbox" value="" id="motion">\
                <label class="form-check-label" for="motion">Motion</label>\
              </div>\
            </td>\
            <td>\
              <select class="form-control" id="motionstate">\
                <option value="1">Detect</option>\
                <option value="0">Undetect</option>\
              </select>\
            </td>\
          </tr>\
        </tbody>\
      </table>\
      <div class="form-group">\
        <label for="roomlab">Room</label>\
        <select class="form-control" id="roomlab">\
          <option>IF-4C01</option>\
          <option>IF-5C01</option>\
        </select>\
      </div>\
        <div class="form-group">\
        <label for="contime">Time</label>\
        <input type="text" class="form-control" id="contime" value="" />\
      </div>',
      focusConfirm: false,
      preConfirm: () => {
        console.log('Is Air checked:' + document.getElementById('aircon').checked+" "+ document.getElementById("airstate").value);
        console.log('Is Light checked:' + document.getElementById('light').checked+" "+ document.getElementById("lightstate").value);
        console.log('Is Electric checked:' + document.getElementById('elect').checked+" "+ document.getElementById("electstate").value);
        console.log('Is Motion checked:' + document.getElementById('motion').checked+" "+ document.getElementById("motionstate").value);
        console.log('Room: '+ document.getElementById("roomlab").value)
        console.log('Time: '+ document.getElementById("contime").value)
      }
    });
    await $('#contime').daterangepicker({
      timePicker: true,
      timePicker24Hour: true,
      timePickerIncrement: 1,
      locale: {
        format: 'HH:mm'
      }
    }).on('show.daterangepicker', function (ev, picker) {
      picker.container.find(".calendar-table").hide();
    });
    $('#aircon').prop('checked', true)
    $("#airstate").val(0);
    $("#roomlab").val("IF-5C01")
    $('#contime').data('daterangepicker').setStartDate('11:11')
    $('#contime').data('daterangepicker').setEndDate('22:22')
  });
  $("#del").click(function(){
    Swal.fire({
      title: 'Are you sure?',
      text: "You won't be able to revert this!",
      icon: 'warning',
      showCancelButton: true,
      confirmButtonColor: '#3085d6',
      cancelButtonColor: '#d33',
      confirmButtonText: 'Yes'
    }).then((result) => {
      if (result.value) {
        Swal.fire(
          'Deleted!',
          'Your condition has been deleted.',
          'success'
        )
      }
    })
  });
</script>
{% endblock %}