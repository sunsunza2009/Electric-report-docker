
<!doctype html>
<html>

<head>
	<meta charset="UTF-8">
	<title>dashboard</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js" integrity="sha256-4iQZ6BVL4qNKlQ27TExEhBN1HFPvAvAMbFavKKosSWQ=" crossorigin="anonymous"></script>
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>	
	<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/sweetalert2@9.10.12/dist/sweetalert2.all.min.js" integrity="sha256-HyVNOA4KTbmvCLxBoFNrj0FLZtj/RCWyg4zfUjIry0k=" crossorigin="anonymous"></script>
	<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>
	<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css" />
	<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment.min.js"></script>
	<script src="https://www.chartjs.org/dist/2.9.3/Chart.min.js"></script>
	<script src="https://www.chartjs.org/samples/latest/utils.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/hammerjs@2.0.8"></script>
	<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-zoom@0.7.4"></script>
	<style>
		canvas {
			-moz-user-select: none;
			-webkit-user-select: none;
			-ms-user-select: none;
		}
	</style>
</head>

<body>
	<div class="container-fluid">
		<div class="row justify-content-center pt-3">
			<div class="col-xs-12 col-sm-offset-2 col-sm-8">
				<div class="mb-4 border-bottom">
					<h1>Dashboard
						
					</h1>
				</div> 
				<form>
					<div class="form-row">
						<div class="col-md mb-3">
						<label for="validationServer01">Sensor Name</label>
						<input type="text" class="form-control " id="validationServer01" placeholder="Search...">
						</div>
					</div>
					<div class="form-row">
					  <div class="col-md-6 mb-3">
						<label for="validationServer04">Building</label>
						<select class="custom-select" id="validationServer04">
						  <option selected disabled value="">Building...</option>
						  <option>Informatics Building</option>
						  <option>Informatics Building</option>
						  <option>BUU Library</option>
						  <option>BUUIC</option>
						  <option>HU-SO</option>
						</select>
						
					  </div>
					  <div class="col-md-3 mb-3">
						<label for="validationServer04">Floor</label>
						<select class="custom-select" id="validationServer04">
						  <option selected disabled value="">Floor...</option>
						  <option>1</option>
						  <option>2</option>
						  <option>3</option>
						  <option>4</option>
						  <option>5</option>
						  <option>6</option>
						  <option>7</option>
						  <option>8</option>
						  <option>9</option>
						  <option>10</option>
						  <option>11</option>
						  <option>12</option>
						</select>
					  </div>
					  <div class="col-md-3 mb-3">
						<label for="validationServer05">Room</label>
						<select class="custom-select" id="validationServer04">
							<option selected disabled value="">Room...</option>
							<option>Room1</option>
							<option>Room2</option>
							<option>Room3</option>
							<option>Room4</option>
							<option>Room5</option>
							<option>Room6</option>
							<option>Room7</option>
							<option>Room8</option>
							<option>Room9</option>
							<option>Room10</option>
						  </select>
					  </div>
					  Sensor Type :
					</div>
					<div class="form-row">
						<div class="col-md-1 mb-3">
					<div class="custom-control custom-checkbox">
						<input type="checkbox" class="custom-control-input" id="customCheck1">
						<label class="custom-control-label" for="customCheck1"> Light </label>
					  </div>
					</div>
					<div class="col-md-1 mb-3">
					  <div class="custom-control custom-checkbox">
						<input type="checkbox" class="custom-control-input" id="customCheck2">
						<label class="custom-control-label" for="customCheck2"> Electricity </label>
					  </div>
					</div>
					<div class="col-md-2 mb-3">
					  <div class="custom-control custom-checkbox">
						<input type="checkbox" class="custom-control-input" id="customCheck3">
						<label class="custom-control-label" for="customCheck3"> Air Conditioner </label>
					  </div>
					</div>
					</div>
					<div class="table"></div>
					<div class="form-row">
						<div class="col-md-8 mb-3">
					<button class="btn btn-primary" type="button" id="search">search</button>
					<button class="btn btn-primary" type="button" id="add">Add to Dashboard</button>
					</div>
				</div>
				  </form>
		<br>
		<br>
		<center>
		<button class="btn btn-success" type="button" id="Bcompare">Compare</button>
		<button class="btn btn-danger" type="button" id="Bcombine">Combine</button>
		<button class="btn btn-warning" type="button" id="Bseparate">Separate</button>
		</center>
		<br>
		
			</div>
		</div>
	</div>
	<center>

	<div class="col-1">
	Since : 
	</div>
	<input type="text" class="form-control col-2" name="daterange" value="" />
	<div class="col-1">
		To : 
		</div>
		
	<input type="text" class="form-control col-2" name="daterange2" value="" />
	<br>
	Chart Type:
	<select id="type">
		<option value="line">Line</option>
		<option value="bar">Bar</option>
	</select>
	<select id="unit">
		<option value="second">Second</option>
		<option value="minute">Minute</option>
		<option value="hour">Hour</option>
		<option value="day" selected>Day</option>
		<option value="month">Month</option>
		<option value="year">Year</option>
	</select>
	<button id="update">update</button>
	<br>
	<div id="compare">
		<div style="width:1000px" >
			<canvas id="chart1"></canvas>
		</div>
		</div>
		<div id="combine">
		<div style="width:1000px" >
			<canvas id="chart2"></canvas>
		</div>
		 </div>
		 <div id="separate">
			<div style="width:1000px" >
				<canvas id="chart3"></canvas>
			</div>
			<div style="width:1000px" >
				<canvas id="chart4"></canvas>
			</div>
			<div style="width:1000px" >
				<canvas id="chart5"></canvas>
			</div>
			 </div>
</center>
	<script>

			$('input[name="daterange"]').daterangepicker({
				timePicker: true,
				timePicker24Hour: true,
				timePickerIncrement: 1,
				locale: {
					format: 'HH:mm'
				}
			}).on('show.daterangepicker', function (ev, picker) {
				picker.container.find(".calendar-table").hide();
			});
			$('input[name="daterange2"]').daterangepicker({
				timePicker: true,
				timePicker24Hour: true,
				timePickerIncrement: 1,
				locale: {
					format: 'HH:mm'
				}
			}).on('show.daterangepicker', function (ev, picker) {
				picker.container.find(".calendar-table").hide();
			});

		$( "#compare" ).hide();
		$( "#combine" ).hide();
		$( "#separate" ).hide();

		$("#Bcompare").click(function(){$( "#compare" ).show();$( "#combine" ).hide();$( "#separate" ).hide();});
		$("#Bcombine").click(function(){$( "#combine" ).show();$( "#compare" ).hide();$( "#separate" ).hide();});
		$("#Bseparate").click(function(){$( "#separate" ).show();$( "#combine" ).hide();$( "#compare" ).hide();});

		$("#search").click(function(){
			Swal.fire({
				width: '45rem',
				title: 'Please select sensor to add to dashboard',
				html: '<table class="table">\
					<thead class="thead-dark">\
						<tr>\
							<th scope="col">#</th>\
							<th scope="col">Sensor Name</th>\
							<th scope="col">Room</th>\
							<th scope="col">Floor</th>\
							<th scope="col">Building</th>\
							<th scope="col">Type</th>\
							<th scope="col">Action</th>\
						</tr>\
					</thead>\
					<tbody id="conLst">\
						<tr>\
							\
							<th scope="row">1</th>\
							<td>Air Conditioner 1 - IF4C01</td>\
							<td>\
								IF4C01\
							</td>\
							<td>\
								4\
							</td>\
							<td>\
							Informatics Building\
							</td>\
							<td>\
								Air Conditioner\
								</td>\
							<td>\
								<div class="form-check">\
  <label class="form-check-label">\
    <input type="checkbox" class="form-check-input" value="">\
  </label>\
</div>\
							</td>\
						</tr>\
						<tr>\
							\
							<th scope="row">5</th>\
							<td>Air Conditioner 2 - IF4C01</td>\
							<td>\
								IF4C01\
							</td>\
							<td>\
								4\
							</td>\
							<td>\
							Informatics Building\
							</td>\
							<td>\
								Air Conditioner\
								</td>\
								<td>\
									<div class="form-check">\
  <label class="form-check-label">\
    <input type="checkbox" class="form-check-input" value="">\
  </label>\
</div>\
							</td>\
						</tr>\
						<tr>\
							\
							<th scope="row">11</th>\
							<td>Light 1 - IF4C01</td>\
							<td>\
								IF4C01\
							</td>\
							<td>\
								4\
							</td>\
							<td>\
							Informatics Building\
							</td>\
							<td>\
								Light\
								</td>\
							<td>								\
								<div class="form-check">\
  <label class="form-check-label">\
    <input type="checkbox" class="form-check-input" value="">\
  </label>\
</div>\
							</td>\
						</tr>\
					</tbody>\
				</table>',
				focusConfirm: false
			});
		});
		function generateData() {
			var unit = document.getElementById('unit').value;

			function unitLessThanDay() {
				return unit === 'second' || unit === 'minute' || unit === 'hour';
			}

			function beforeNineThirty(date) {
				return date.hour() < 9 || (date.hour() === 9 && date.minute() < 30);
			}

			// Returns true if outside 9:30am-4pm on a weekday
			function outsideMarketHours(date) {
				if (date.isoWeekday() > 5) {
					return true;
				}
				if (unitLessThanDay() && (beforeNineThirty(date) || date.hour() > 16)) {
					return true;
				}
				return false;
			}

			function randomNumber(min, max) {
				return Math.random() * (max - min) + min;
			}

			function randomBar(date, lastClose) {
				var open = randomNumber(lastClose * 0.95, lastClose * 1.05).toFixed(2);
				var close = randomNumber(open * 0.95, open * 1.05).toFixed(2);
				return {
					t: date.valueOf(),
					y: close
				};
			}

			var date = moment('Jan 01 1990', 'MMM DD YYYY');
			var now = moment();
			var data = [];
			var lessThanDay = unitLessThanDay();
			for (; data.length < 600 && date.isBefore(now); date = date.clone().add(1, unit).startOf(unit)) {
				if (outsideMarketHours(date)) {
					if (!lessThanDay || !beforeNineThirty(date)) {
						date = date.clone().add(date.isoWeekday() >= 5 ? 8 - date.isoWeekday() : 1, 'day');
					}
					if (lessThanDay) {
						date = date.hour(9).minute(30).second(0);
					}
				}
				data.push(randomBar(date, data.length > 0 ? data[data.length - 1].y : 30));
			}

			return data;
		}

		var ctx1 = document.getElementById('chart1').getContext('2d');
		ctx1.canvas.width = 1000;
		ctx1.canvas.height = 300;

		var color = Chart.helpers.color;
		var cfg1 = {
			data: {
				datasets: [{
					label: 'IF - 4C01',
					backgroundColor: color(window.chartColors.red).alpha(0.5).rgbString(),
					borderColor: window.chartColors.red,
					data: generateData(),
					type: 'line',
					pointRadius: 0,
					fill: false,
					lineTension: 0,
					borderWidth: 2
				},
				{
					label: 'IF - 4C02',
					backgroundColor: color(window.chartColors.blue).alpha(0.5).rgbString(),
					borderColor: window.chartColors.blue,
					data: generateData(),
					type: 'line',
					pointRadius: 0,
					fill: false,
					lineTension: 0,
					borderWidth: 2
				},
				{
					label: 'IF - 4C03',
					backgroundColor: color(window.chartColors.green).alpha(0.5).rgbString(),
					borderColor: window.chartColors.green,
					data: generateData(),
					type: 'line',
					pointRadius: 0,
					fill: false,
					lineTension: 0,
					borderWidth: 2
				}
				]
			},
			options: {
				animation: {
					duration: 0
				},
				scales: {
					xAxes: [{
						type: 'time',
						distribution: 'series',
						offset: true,
						ticks: {
							major: {
								enabled: true,
								fontStyle: 'bold'
							},
							source: 'data',
							autoSkip: true,
							autoSkipPadding: 75,
							maxRotation: 0,
							sampleSize: 100
						},
						afterBuildTicks: function(scale, ticks) {
							var majorUnit = scale._majorUnit;
							var firstTick = ticks[0];
							var i, ilen, val, tick, currMajor, lastMajor;

							val = moment(ticks[0].value);
							if ((majorUnit === 'minute' && val.second() === 0)
									|| (majorUnit === 'hour' && val.minute() === 0)
									|| (majorUnit === 'day' && val.hour() === 9)
									|| (majorUnit === 'month' && val.date() <= 3 && val.isoWeekday() === 1)
									|| (majorUnit === 'year' && val.month() === 0)) {
								firstTick.major = true;
							} else {
								firstTick.major = false;
							}
							lastMajor = val.get(majorUnit);

							for (i = 1, ilen = ticks.length; i < ilen; i++) {
								tick = ticks[i];
								val = moment(tick.value);
								currMajor = val.get(majorUnit);
								tick.major = currMajor !== lastMajor;
								lastMajor = currMajor;
							}
							return ticks;
						}
					}],
					yAxes: [{
						gridLines: {
							drawBorder: false
						},
						scaleLabel: {
							display: true,
							labelString: 'Closing price ($)'
						}
					}]
				},
				pan: {
      enabled: true,
      mode: "x",
      speed: 100,
      threshold: 100
    },
    zoom: {
      enabled: true,
      drag: false,
      mode: "x",
    }
	,
				tooltips: {
					intersect: false,
					mode: 'index',
					callbacks: {
						label: function(tooltipItem, myData) {
							var label = myData.datasets[tooltipItem.datasetIndex].label || '';
							if (label) {
								label += ': ';
							}
							label += parseFloat(tooltipItem.value).toFixed(2);
							return label;
						}
					}
				}
			}
		};

		var ctx2 = document.getElementById('chart2').getContext('2d');
		ctx2.canvas.width = 1000;
		ctx2.canvas.height = 300;

		var color = Chart.helpers.color;
		var cfg2 = {
			data: {
				datasets: [{
					label: 'IF - 4C01 & IF - 4C02 & IF - 4C03',
					backgroundColor: color(window.chartColors.yellow).alpha(0.5).rgbString(),
					borderColor: window.chartColors.yellow,
					data: generateData(),
					type: 'line',
					pointRadius: 0,
					fill: false,
					lineTension: 0,
					borderWidth: 2
				}
				]
			},
			options: {
				animation: {
					duration: 0
				},
				scales: {
					xAxes: [{
						type: 'time',
						distribution: 'series',
						offset: true,
						ticks: {
							major: {
								enabled: true,
								fontStyle: 'bold'
							},
							source: 'data',
							autoSkip: true,
							autoSkipPadding: 75,
							maxRotation: 0,
							sampleSize: 100
						},
						afterBuildTicks: function(scale, ticks) {
							var majorUnit = scale._majorUnit;
							var firstTick = ticks[0];
							var i, ilen, val, tick, currMajor, lastMajor;

							val = moment(ticks[0].value);
							if ((majorUnit === 'minute' && val.second() === 0)
									|| (majorUnit === 'hour' && val.minute() === 0)
									|| (majorUnit === 'day' && val.hour() === 9)
									|| (majorUnit === 'month' && val.date() <= 3 && val.isoWeekday() === 1)
									|| (majorUnit === 'year' && val.month() === 0)) {
								firstTick.major = true;
							} else {
								firstTick.major = false;
							}
							lastMajor = val.get(majorUnit);

							for (i = 1, ilen = ticks.length; i < ilen; i++) {
								tick = ticks[i];
								val = moment(tick.value);
								currMajor = val.get(majorUnit);
								tick.major = currMajor !== lastMajor;
								lastMajor = currMajor;
							}
							return ticks;
						}
					}],
					yAxes: [{
						gridLines: {
							drawBorder: false
						},
						scaleLabel: {
							display: true,
							labelString: 'Closing price ($)'
						}
					}]
				},
				pan: {
      enabled: true,
      mode: "x",
      speed: 100,
      threshold: 100
    },
    zoom: {
      enabled: true,
      drag: false,
      mode: "x",
    }
	,
				tooltips: {
					intersect: false,
					mode: 'index',
					callbacks: {
						label: function(tooltipItem, myData) {
							var label = myData.datasets[tooltipItem.datasetIndex].label || '';
							if (label) {
								label += ': ';
							}
							label += parseFloat(tooltipItem.value).toFixed(2);
							return label;
						}
					}
				}
			}
		};

		var ctx3 = document.getElementById('chart3').getContext('2d');
		ctx3.canvas.width = 1000;
		ctx3.canvas.height = 300;

		var color = Chart.helpers.color;
		var cfg3 = {
			data: {
				datasets: [{
					label: 'IF - 4C01 | Light',
					backgroundColor: color(window.chartColors.red).alpha(0.5).rgbString(),
					borderColor: window.chartColors.red,
					data: generateData(),
					type: 'line',
					pointRadius: 0,
					fill: false,
					lineTension: 0,
					borderWidth: 2
				},
				{
					label: 'IF - 4C01 | Electricity',
					backgroundColor: color(window.chartColors.green).alpha(0.5).rgbString(),
					borderColor: window.chartColors.green,
					data: generateData(),
					type: 'line',
					pointRadius: 0,
					fill: false,
					lineTension: 0,
					borderWidth: 2
				},
				{
					label: 'IF - 4C01 | Air Conditioner',
					backgroundColor: color(window.chartColors.blue).alpha(0.5).rgbString(),
					borderColor: window.chartColors.blue,
					data: generateData(),
					type: 'line',
					pointRadius: 0,
					fill: false,
					lineTension: 0,
					borderWidth: 2
				}
				]
			},
			options: {
				animation: {
					duration: 0
				},
				scales: {
					xAxes: [{
						type: 'time',
						distribution: 'series',
						offset: true,
						ticks: {
							major: {
								enabled: true,
								fontStyle: 'bold'
							},
							source: 'data',
							autoSkip: true,
							autoSkipPadding: 75,
							maxRotation: 0,
							sampleSize: 100
						},
						afterBuildTicks: function(scale, ticks) {
							var majorUnit = scale._majorUnit;
							var firstTick = ticks[0];
							var i, ilen, val, tick, currMajor, lastMajor;

							val = moment(ticks[0].value);
							if ((majorUnit === 'minute' && val.second() === 0)
									|| (majorUnit === 'hour' && val.minute() === 0)
									|| (majorUnit === 'day' && val.hour() === 9)
									|| (majorUnit === 'month' && val.date() <= 3 && val.isoWeekday() === 1)
									|| (majorUnit === 'year' && val.month() === 0)) {
								firstTick.major = true;
							} else {
								firstTick.major = false;
							}
							lastMajor = val.get(majorUnit);

							for (i = 1, ilen = ticks.length; i < ilen; i++) {
								tick = ticks[i];
								val = moment(tick.value);
								currMajor = val.get(majorUnit);
								tick.major = currMajor !== lastMajor;
								lastMajor = currMajor;
							}
							return ticks;
						}
					}],
					yAxes: [{
						gridLines: {
							drawBorder: false
						},
						scaleLabel: {
							display: true,
							labelString: 'Closing price ($)'
						}
					}]
				},
				pan: {
      enabled: true,
      mode: "x",
      speed: 100,
      threshold: 100
    },
    zoom: {
      enabled: true,
      drag: false,
      mode: "x",
    }
	,
				tooltips: {
					intersect: false,
					mode: 'index',
					callbacks: {
						label: function(tooltipItem, myData) {
							var label = myData.datasets[tooltipItem.datasetIndex].label || '';
							if (label) {
								label += ': ';
							}
							label += parseFloat(tooltipItem.value).toFixed(2);
							return label;
						}
					}
				}
			}
		};

		var ctx4 = document.getElementById('chart4').getContext('2d');
		ctx4.canvas.width = 1000;
		ctx4.canvas.height = 300;

		var color = Chart.helpers.color;
		var cfg4 = {
			data: {
				datasets: [{
					label: 'IF - 4C02 - Light1',
					backgroundColor: color(window.chartColors.red).alpha(0.5).rgbString(),
					borderColor: window.chartColors.red,
					data: generateData(),
					type: 'line',
					pointRadius: 0,
					fill: false,
					lineTension: 0,
					borderWidth: 2
				},
				{
					label: 'IF - 4C02 | Light2',
					backgroundColor: color(window.chartColors.green).alpha(0.5).rgbString(),
					borderColor: window.chartColors.green,
					data: generateData(),
					type: 'line',
					pointRadius: 0,
					fill: false,
					lineTension: 0,
					borderWidth: 2
				}
				]
			},
			options: {
				animation: {
					duration: 0
				},
				scales: {
					xAxes: [{
						type: 'time',
						distribution: 'series',
						offset: true,
						ticks: {
							major: {
								enabled: true,
								fontStyle: 'bold'
							},
							source: 'data',
							autoSkip: true,
							autoSkipPadding: 75,
							maxRotation: 0,
							sampleSize: 100
						},
						afterBuildTicks: function(scale, ticks) {
							var majorUnit = scale._majorUnit;
							var firstTick = ticks[0];
							var i, ilen, val, tick, currMajor, lastMajor;

							val = moment(ticks[0].value);
							if ((majorUnit === 'minute' && val.second() === 0)
									|| (majorUnit === 'hour' && val.minute() === 0)
									|| (majorUnit === 'day' && val.hour() === 9)
									|| (majorUnit === 'month' && val.date() <= 3 && val.isoWeekday() === 1)
									|| (majorUnit === 'year' && val.month() === 0)) {
								firstTick.major = true;
							} else {
								firstTick.major = false;
							}
							lastMajor = val.get(majorUnit);

							for (i = 1, ilen = ticks.length; i < ilen; i++) {
								tick = ticks[i];
								val = moment(tick.value);
								currMajor = val.get(majorUnit);
								tick.major = currMajor !== lastMajor;
								lastMajor = currMajor;
							}
							return ticks;
						}
					}],
					yAxes: [{
						gridLines: {
							drawBorder: false
						},
						scaleLabel: {
							display: true,
							labelString: 'Closing price ($)'
						}
					}]
				},
				pan: {
      enabled: true,
      mode: "x",
      speed: 100,
      threshold: 100
    },
    zoom: {
      enabled: true,
      drag: false,
      mode: "x",
    }
	,
				tooltips: {
					intersect: false,
					mode: 'index',
					callbacks: {
						label: function(tooltipItem, myData) {
							var label = myData.datasets[tooltipItem.datasetIndex].label || '';
							if (label) {
								label += ': ';
							}
							label += parseFloat(tooltipItem.value).toFixed(2);
							return label;
						}
					}
				}
			}
		};

		var ctx5 = document.getElementById('chart5').getContext('2d');
		ctx5.canvas.width = 1000;
		ctx5.canvas.height = 300;

		var color = Chart.helpers.color;
		var cfg5 = {
			data: {
				datasets: [{
					label: 'IF - 4C03 | Light',
					backgroundColor: color(window.chartColors.red).alpha(0.5).rgbString(),
					borderColor: window.chartColors.red,
					data: generateData(),
					type: 'line',
					pointRadius: 0,
					fill: false,
					lineTension: 0,
					borderWidth: 2
				},
				{
					label: 'IF - 4C03 | Electricity',
					backgroundColor: color(window.chartColors.green).alpha(0.5).rgbString(),
					borderColor: window.chartColors.green,
					data: generateData(),
					type: 'line',
					pointRadius: 0,
					fill: false,
					lineTension: 0,
					borderWidth: 2
				}
				]
			},
			options: {
				animation: {
					duration: 0
				},
				scales: {
					xAxes: [{
						type: 'time',
						distribution: 'series',
						offset: true,
						ticks: {
							major: {
								enabled: true,
								fontStyle: 'bold'
							},
							source: 'data',
							autoSkip: true,
							autoSkipPadding: 75,
							maxRotation: 0,
							sampleSize: 100
						},
						afterBuildTicks: function(scale, ticks) {
							var majorUnit = scale._majorUnit;
							var firstTick = ticks[0];
							var i, ilen, val, tick, currMajor, lastMajor;

							val = moment(ticks[0].value);
							if ((majorUnit === 'minute' && val.second() === 0)
									|| (majorUnit === 'hour' && val.minute() === 0)
									|| (majorUnit === 'day' && val.hour() === 9)
									|| (majorUnit === 'month' && val.date() <= 3 && val.isoWeekday() === 1)
									|| (majorUnit === 'year' && val.month() === 0)) {
								firstTick.major = true;
							} else {
								firstTick.major = false;
							}
							lastMajor = val.get(majorUnit);

							for (i = 1, ilen = ticks.length; i < ilen; i++) {
								tick = ticks[i];
								val = moment(tick.value);
								currMajor = val.get(majorUnit);
								tick.major = currMajor !== lastMajor;
								lastMajor = currMajor;
							}
							return ticks;
						}
					}],
					yAxes: [{
						gridLines: {
							drawBorder: false
						},
						scaleLabel: {
							display: true,
							labelString: 'Closing price ($)'
						}
					}]
				},
				pan: {
      enabled: true,
      mode: "x",
      speed: 100,
      threshold: 100
    },
    zoom: {
      enabled: true,
      drag: false,
      mode: "x",
    }
	,
				tooltips: {
					intersect: false,
					mode: 'index',
					callbacks: {
						label: function(tooltipItem, myData) {
							var label = myData.datasets[tooltipItem.datasetIndex].label || '';
							if (label) {
								label += ': ';
							}
							label += parseFloat(tooltipItem.value).toFixed(2);
							return label;
						}
					}
				}
			}
		};
		var chart1 = new Chart(ctx1, cfg1);
		var chart2 = new Chart(ctx2, cfg2);
		var chart3 = new Chart(ctx3, cfg3);
		var chart4 = new Chart(ctx4, cfg4);
		var chart5 = new Chart(ctx5, cfg5);

		document.getElementById('update').addEventListener('click', function() {
			var type = document.getElementById('type').value;
			var dataset1 = chart1.config.data.datasets[0];
			dataset1.type = type;
			dataset1.data = generateData();
			var dataset2 = chart1.config.data.datasets[1];
			dataset2.type = type;
			dataset2.data = generateData();
			var dataset3 = chart1.config.data.datasets[2];
			dataset3.type = type;
			dataset3.data = generateData();
			chart1.update();

			var dataset4 = chart2.config.data.datasets[0];
			dataset4.type = type;
			dataset4.data = generateData();
			chart2.update();

			var dataset5 = chart3.config.data.datasets[0];
			dataset5.type = type;
			dataset5.data = generateData();
			var dataset6 = chart3.config.data.datasets[1];
			dataset6.type = type;
			dataset6.data = generateData();
			var dataset7 = chart3.config.data.datasets[2];
			dataset7.type = type;
			dataset7.data = generateData();
			chart3.update();

			var dataset8 = chart4.config.data.datasets[0];
			dataset8.type = type;
			dataset8.data = generateData();
			var dataset9 = chart4.config.data.datasets[1];
			dataset9.type = type;
			dataset9.data = generateData();
			chart4.update();

			var dataset10 = chart5.config.data.datasets[0];
			dataset10.type = type;
			dataset10.data = generateData();
			var dataset11 = chart5.config.data.datasets[1];
			dataset11.type = type;
			dataset11.data = generateData();
			
			chart5.update();
		});


	</script>
</body>

</html>
